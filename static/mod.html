<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>JollyWorld - Modder</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.1.0/jszip-utils.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js"></script>
	<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
	<link rel="stylesheet" type="text/css" href="mod/styles.css">
</head>
<body ondrop="handleFileSelect()">
	<div class="closebutton" onclick="closeModWindow()">
		<svg height="50" width="50">
			<line x1="10" y1="10" x2="40" y2="40" style="stroke:#FFF; stroke-width:5; stroke-linecap:round" />
			<line x1="10" y1="40" x2="40" y2="10" style="stroke:#FFF; stroke-width:5; stroke-linecap:round" />
 		</svg>
	</div>
	<div class="section">
		<div class="dashboardSection" style="height:440px">
			<h1 id="defaultCharacters">Default Characters:</h1>
			<div id="defaultCharacterSelection"></div>
		</div>
		<div class="dashboardSection" style="height:440px">
			<h1 id="currentMod">Current Character:</h1>
			<h1 id="installedMod"></h1>
			<div class="singleModCanvas" id="currentModThumb"></div>
		</div>
		<div class="dashboardSection">
			<button onclick="openModEditor()" class="button" id="create" style="background-color: #FF6600;">Create your own Mod</button>
			<button onclick="loadWardrobeContents();$('zipFileInput').click()" class="button" id="create" style="background-color: #AA00AA;">Import from .zip</button>
			<!--<button onclick="exportMod()" class="button" style="background-color: #7B7B7B">Export current Mod</button>-->
			<button onclick="toggleTheme()" class="button" id="darkmodebutton" style="background-color:#262626">Dark Theme</button>
			<button onclick="closeModWindow()" class="button" style="background-color: #D70000">Back to Game</button>
		</div>
	</div>
	<div class="section">
		<h1>All Public Mods:</h1>
		<div id="publicMods">
		</div>
	</div>
	<div id="loadingbackground" style="opacity:0;pointer-events:none;">
		<div id="loadingwindow">
			<h1 id="loadingtitle">Loading...</h1>
			<div id="loadingbar">
				<div id="loadingbarprogress"></div>
			</div>
		</div>
	</div>
	<div id="creatorbackground" style="opacity:0;pointer-events:none;">
		<div id="creatorwindow">
			<div class="createmodoption" style="background-color:#23FD12" onclick="closeModEditor();openModWardrobe();">
				<div class="hoveroverlay"></div>
				<h1 class="createmodoptiontitle">Create from Wardrobe</h1>
				<p class="createmodoptiondescription">Easiest and fastest</p>
				<span class="difficultystarslabel">Difficulty:</span>
				<div class="difficultystars" style="width:40px"></div>
				<img class="createmodicon" src="mod/pageassets/createfromwardrobe.png">
			</div>
			<div class="createmodoption" style="background-color:#FDFD12; pointer-events: none; opacity:0.5;">
				<div class="hoveroverlay"></div>
				<h1 class="createmodoptiontitle">Create in Online Editor</h1>
				<p class="createmodoptiondescription">Coming at a later point</p>
				<span class="difficultystarslabel">Difficulty:</span>
				<div class="difficultystars" style="width:80px"></div>
				<img class="createmodicon" src="mod/pageassets/createinonlineeditor.png">
			</div>
			<a class="createmodoption" style="background-color:#FD4812" href="https://warze.org/static/jollyworld/mods/jollymod.zip">
				<div class="hoveroverlay"></div>
				<h1 class="createmodoptiontitle">Download .zip Template</h1>
				<p class="createmodoptiondescription">Requires extra art software</p>
				<span class="difficultystarslabel">Difficulty:</span>
				<div class="difficultystars" style="width:120px"></div>
				<img class="createmodicon" src="mod/pageassets/downloadtemplate.png">
			</a>
			<button class="button" style="background-color:#888" onclick="closeModEditor()">Cancel</button>
		</div>
	</div>
	<div id="modwardrobewindow" style="top:100vh;opacity:0;">
		<div class="closebutton" onclick="closeModWardrobe()">
			<svg height="50" width="50">
   				<line x1="10" y1="10" x2="40" y2="40" style="stroke:#FFF; stroke-width:5; stroke-linecap:round" />
   				<line x1="10" y1="40" x2="40" y2="10" style="stroke:#FFF; stroke-width:5; stroke-linecap:round" />
 			</svg>
		</div>
		<div class="modwardrobepreview">
			<div onclick="viewPreviousVehicle()" class="vehiclePreviewButton">
				<svg height="100" width="50" id="vehiclePreviewButtonLeft">
					<polygon points="50,0 50,100 0,50" style="fill:black;" />
				</svg> 
			</div>
			<div id="modwardrobepreviewcanvas" class="singleModCanvas"></div>
			<div onclick="viewNextVehicle()" class="vehiclePreviewButton">
				<svg height="100" width="50" id="vehiclePreviewButtonRight">
					<polygon points="0,0 50,50 0,100" style="fill:black;" />
				</svg> 
			</div>
		</div>
		<h1 id="modwardrobestepcounter">
			<button class="button" onclick="previousWardrobePage()" style="background-color:#7B7B7B;display:inline-block;">Undo</button>
			Step
			<span id="modwardrobestep">1</span>
			/
			<span id="modwardrobetotalsteps">Loading...</span>
		</h1>
		<div id="modwardrobesteps">
		</div>
		<div id="modwardrobefinal">
			<h1>Your character is done!</h1>
			<button class="button" style="background-color:#3F7D20" id="modwardrobeadditionalsettingsbutton" onclick="showAdditionalSettings()">More Customizations</button>
			<div id="modwardrobeadditionalsettings" style="display:none;">
				<div style="text-align: left;">
					<label>Character Name:</label>
					<input type="text" oninput="modWardrobeCharacterName = this.value" value="Billy Joel" placeholder="Character Name">
					<br>
					<label>Door Color:</label>
					<input type="color" oninput="modWardrobeDoorColor = this.value; $('doorPreviewContainer').style.backgroundColor = this.value;" id="doorcolor">
					<br>
					<label>Preloader Color:</label>
					<input type="color" oninput="modWardrobePreloaderColor = this.value; $('doorPreviewLoadingBar').style.backgroundColor = this.value;" id="preloadercolor">
					<div id="doorPreviewContainer" style="background-color: #3d7d1e;left:0px;top:0px;">
						<div id="doorPreviewLoadingBar" class="doorPreviewComponent" style="background-color: #d70201;left:87px;top:32px;"></div>
						<img src="mod/pageassets/doorPreview.png" style="left:85px;" class="doorPreviewComponent">
					</div>
				</div>
			</div>
			<button class="button" style="background-color:#A0A" onclick="processWardrobe(false)">Download as .zip</button>
			<button class="button" style="background-color:#4BD748" onclick="processWardrobe(true)">Apply this character</button>
			<div id="pointingarrowcontainer">
				<img src="mod/pageassets/arrow.png" id="pointingarrow">
			</div>
		</div>
		<lottie-player id="confetti" src="https://assets8.lottiefiles.com/packages/lf20_rovf9gzu.json" background="transparent" speed="1"></lottie-player>
	</div>
	<input type="file" id="zipFileInput" style="display:none" accept=".zip" onchange="handleFileSelect()">
	<script>
		const all_public_mods = [
			["Cirilla", "Ocularist"],
			["Darkmode", "TriggerTitan"],
			["TrudyWalker", "Anonymous Frog"],
			["piconjomod", "Anonymous Frog"],
			["jollyMattShea", "JollyBoy"],
			["warzemod", "Warze"],
			["JunpeiZaki", "JollyBoy"],
		];
	</script>
	<script type="text/javascript" src="mod/modWardrobe.js"></script>
	<script type="text/javascript" src="mod/modImportSource.js"></script>
	<script type="text/javascript" src="mod/characterSelection.js"></script>
</body>
</html>