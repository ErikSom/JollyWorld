import * as PrefabManager from '../PrefabManager';
import * as AudioManager from '../../utils/AudioManager';

import { BaseVehicle } from './BaseVehicle';

class Bike extends BaseVehicle {
    constructor(target) {
        super(target);
        this.destroyConnectedJoints = {
            head:['pedal_right_joint', 'pedal_left_joint', 'grip_right_joint', 'grip_left_joint', 'back_joint', 'neck_joint', 'sit_joint'],
            body:['pedal_right_joint', 'pedal_left_joint', 'grip_right_joint', 'grip_left_joint', 'back_joint', 'neck_joint', 'sit_joint'],
            thigh_left:['pedal_left_joint', {ifno:'pedal_right_joint', destroy:['sit_joint', 'back_joint']}],
            thigh_right:['pedal_right_joint', {ifno:'pedal_left_joint', destroy:['sit_joint', 'back_joint']}],
            leg_left:['pedal_left_joint', {ifno:'pedal_right_joint', destroy:['sit_joint', 'back_joint']}],
            leg_right:['pedal_right_joint', {ifno:'pedal_left_joint', destroy:['sit_joint', 'back_joint']}],
            feet_left:['pedal_left_joint', {ifno:'pedal_right_joint', destroy:['sit_joint', 'back_joint']}],
            feet_right:['pedal_right_joint', {ifno:'pedal_left_joint', destroy:['sit_joint', 'back_joint']}],
            shoulder_left:['grip_left_joint', {ifno:'grip_right_joint', destroy:['back_joint']}],
            shoulder_right:['grip_right_joint', {ifno:'grip_left_joint', destroy:['back_joint']}],
            arm_left:['grip_left_joint', {ifno:'grip_right_joint', destroy:['back_joint']}],
            arm_right:['grip_right_joint', {ifno:'grip_left_joint', destroy:['back_joint']}],
            hand_left:['grip_left_joint', {ifno:'grip_right_joint', destroy:['back_joint']}],
            hand_right:['grip_right_joint', {ifno:'grip_left_joint', destroy:['back_joint']}],
        }
        this.vehicleName = 'Bike';
    }
    init() {
        super.init();
        this.desiredVehicleTorques = [100, 100];
        this.desiredVehicleSpeeds = [20, 20];
    }
    update() {
        super.update();
    }
    accelerate(dir){
        AudioManager.playPrefabUniqueLoopSFX(this.prefabObject.key, 'bike_pedal_loop', 0.5);
        AudioManager.stopPrefabUniqueLoopSFX(this.prefabObject.key, 'bike_idle_loop');

        super.accelerate(dir);
    }
    stopAccelerate(){
        AudioManager.stopPrefabUniqueLoopSFX(this.prefabObject.key, 'bike_pedal_loop');
        AudioManager.playPrefabUniqueLoopSFX(this.prefabObject.key, 'bike_idle_loop', 0.5);
    }
}

PrefabManager.prefabLibrary.Bike = {
    json: '{"objects":[[0,-1.4881290485477856,-0.20601457546639562,0,".character#Character , .flesh","belly",0,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,14.181497764354457,"",1],[0,-2.920810985896667,3.0917373915784503,0,".vehicle","wheel_back",1,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,55.342622382700604,"",1],[0,-0.03955553222104535,-2.277293681725032,-0.7679448708775047,".character#Character , .flesh","shoulder_left",2,"#999999","#000",0,false,true,[{"x":-0.18491373990083915,"y":-0.8588215919838902},{"x":0.19313212834087423,"y":-0.8423848151038147},{"x":0.11094824394050207,"y":0.8506032035438524},{"x":-0.11916663238053715,"y":0.8506032035438524}],1,7,null,"",1],[0,-0.36917814847328745,3.415442212226376,0,".vehicle","pedal",3,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,15.695946924915829,"",1],[0,-0.0024367989173880167,1.7711747161382954,0,".vehicle","frame",4,"#999999","#000",0,false,true,[{"x":-1.866666666666669,"y":-1.666666666666667},{"x":1.966666666666665,"y":-2.7666666666666666},{"x":3.066666666666663,"y":1.299999999999999},{"x":-0.23333333333333428,"y":1.7666666666666657},{"x":-2.9333333333333353,"y":1.3666666666666671}],1,7,null,"",1],[0,3.0307281006448505,3.0622425654175935,0,".vehicle","wheel_front",5,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,54.82895314162905,"",1],[0,1.1978604828584272,-1.609188225246529,-1.4660765716752366,".character#Character , .flesh","arm_left",6,"#999999","#000",0,false,true,[{"x":-0.13560340926061798,"y":-0.6862354347431072},{"x":0.14382179770064596,"y":-0.7026722116231809},{"x":0.12738502082057224,"y":0.6944538231831459},{"x":-0.13560340926061798,"y":0.6944538231831459}],1,7,null,"",1],[1,-0.7160443489714556,-68.645859238965,-0.7679448708775047,"","",7,"Normal_Shoulder0000",2,0.5731017503262358,-0.16063012257496162,0,true,"#FFFFFF"],[1,36.1859955572582,-48.436827005807,-1.4660765716752366,"","",8,"Normal_Arm0000",6,0.29760652045521085,-0.8937510689744023,0,true,"#FFFFFF"],[2,17.416513728842347,-50.266620396764175,0,".character#Character","arm_left_joint",9,6,2,0,false,false,1,10,true,152,0,0,0,0,0],[0,2.0984960915311635,-1.3468220706618923,-1.5009831567151235,".character#Character , .flesh","hand_left",10,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,7.512582183874799,"",1],[1,62.42196782222551,-38.68795758796856,-1.5009831567151235,"","",11,"Normal_Hand0000",10,1.7975185021906417,2.9104087855451417,0,true,"#FFFFFF"],[2,56.47732156051729,-44.82853576963867,0,".character#Character","hand_left_joint",12,10,6,0,false,false,1,10,true,60,-60,0,0,0,0],[0,-0.5588139425124747,0.5365243275043186,-0.9075712110370522,".character#Character , .flesh","thigh_left",13,"#999999","#000",0,false,true,[{"x":-0.20241022695050503,"y":-1.031328299223996},{"x":0.1959845054600109,"y":-1.0441797422049808},{"x":0.17028161949803788,"y":1.0377540207144893},{"x":-0.16385589800755085,"y":1.0377540207144893}],1,7,null,"",1],[0,0.09544964279849022,2.0289178508961574,0.24434609527920528,".character#Character , .flesh","leg_left",14,"#999999","#000",0,false,true,[{"x":-0.16064303726230378,"y":-0.9124524516498909},{"x":0.16064303726230378,"y":-0.9253038946308756},{"x":0.08353437937639896,"y":0.9124524516498909},{"x":-0.08353437937639896,"y":0.9253038946308738}],1,7,null,"",1],[1,-16.718291009464384,16.506359197979467,-0.9075712110370522,"","",15,"Normal_Thigh0000",13,0.4132120599733628,-2.3665034033387577,0,true,"#FFFFFF"],[0,0.02931587646287237,3.1040822873389744,0.10471975511965961,".character#Character , .flesh","feet_left",16,"#999999","#000",0,false,true,[{"x":-0.3532003169100655,"y":-0.2334193398709985},{"x":0.3593429311171974,"y":0},{"x":0.3593429311171974,"y":0.12285228414263472},{"x":-0.3654855453243293,"y":0.11056705572837089}],1,7,null,"",1],[1,2.670598608971157,60.819442480124174,0.24434609527920528,"","",17,"Normal_Leg0000",14,0.19879575861250487,-3.1415926535889356,0,true,"#FFFFFF"],[2,6.080191949668233,34.84420049102433,0,".character#Character","leg_left_joint",18,14,13,0,false,false,1,10,true,0,-149,0,0,0,0],[1,1.553752298147555,91.76572057838662,0.10471975511965961,"","",19,"Normal_Feet0000",16,1.515062169946712,1.2142877670861258,0,true,"#FFFFFF"],[1,-10.718575303802263,102.41178466834725,0,"","",20,"Bicycle_Pedals0000",3,0.36046441148776853,0.1433105210885714,0,null,"#FFFFFF"],[1,90.91636655216612,91.86727696252792,0,"","",21,"Bicycle_WheelFront0000",5,0.005476467179391875,-3.141592653569034,0,null,"#FFFFFF"],[1,-87.04193017482575,92.21545703335131,0,"","",22,"Bicycle_WheelBack0000",1,0.7919583819819808,0.7445522010315536,0,null,"#FFFFFF"],[1,0.926896032478245,33.13524148414858,0,"","",23,"Bicycle_Body0000",4,20.024984394501065,1.5208379310729603,0,null,"#FFFFFF"],[2,-4.550705044708597,87.37277584095949,0,".character#Character","feet_left_joint",24,16,14,0,false,false,1,10,true,0,0,0,0,0,0],[2,-87.48425324044659,91.4420717514557,0,".vehicle","engine1",25,1,4,0,false,true,100,20,false,0,0,0,0,0,0],[2,-11.344974603786799,102.19192260910702,0,".vehicle","pedal_engine",26,3,4,0,false,true,100,20,false,0,0,0,0,0,0],[2,90.8350407622511,91.71118831367843,0,".vehicle","engine2",27,5,4,0,false,true,100,20,false,0,0,0,0,0,0],[0,-0.1758038624307754,-4.356680473333219,0,".character#Character , .flesh","head",28,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,30.393075689479595,"",1],[0,-0.8956772643041511,-1.9211056898254968,0.3490658503988659,".character#Character , .flesh","body",29,"#999999","#000",0,false,true,[{"x":-0.5373137876370677,"y":1.2023497051222813},{"x":-0.4316127146592841,"y":-1.3697097373371037},{"x":-0.1497431867185277,"y":-1.82774772024083},{"x":0.1321263412222251,"y":-1.7925140292482356},{"x":0.5549306331333597,"y":-1.1230739003889436},{"x":0.5549306331333597,"y":1.308050778100065},{"x":0.09689265022963056,"y":1.801322451996385},{"x":-0.2202105687037168,"y":1.801322451996385}],1,7,null,"",1],[1,-41.13422078907006,-14.192199759023456,0.2,"","",30,"Normal_Belly0000",0,8.746770037203438,1.1579140652818587,-0.2,false,"#FFFFFF"],[1,-24.74000283543914,-61.216582791160576,0.3490658503988659,"","",31,"Normal_Core0000",29,4.16882293351236,1.3835014335302833,0,true,"#FFFFFF"],[1,-3.160094413368342,-132.81443565955223,0,"","",32,"Normal_Head_Idle0000",28,2.989677819250855,0.785398163397623,0,true,"#FFFFFF"],[2,-8.694490254222277,-102.80460570208368,0,".character#Character","head_joint",33,28,29,0,false,false,1,10,true,58,-64,0,0,0,0],[0,-0.9747147864807904,0.9190024212953947,-0.45378560551852554,".character#Character , .flesh","thigh_right",34,"#999999","#000",0,false,true,[{"x":-0.20241022695050503,"y":-1.031328299223996},{"x":0.1959845054600109,"y":-1.0441797422049808},{"x":0.17028161949803788,"y":1.0377540207144893},{"x":-0.16385589800755085,"y":1.0377540207144893}],1,7,null,"",1],[0,-0.6535186114599003,2.730751467419776,0.17453292519943295,".character#Character , .flesh","leg_right",35,"#999999","#000",0,false,true,[{"x":-0.16064303726230378,"y":-0.9124524516498909},{"x":0.16064303726230378,"y":-0.9253038946308756},{"x":0.08353437937639896,"y":0.9124524516498909},{"x":-0.08353437937639896,"y":0.9253038946308738}],1,7,null,"",1],[0,0.013527587320195766,-4.45222602219477,0,".character#Character","eye_left",36,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,7.534037070968986,"",1],[1,-29.379992751533365,27.95936473687005,-0.45378560551852554,"","",37,"Normal_Thigh0000",34,0.4132120599733628,-2.3665034033387577,0,true,"#FFFFFF"],[1,-19.801333948144578,81.88802350138246,0.17453292519943295,"","",38,"Normal_Leg0000",35,0.19879575861250487,-3.1415926535889356,0,true,"#FFFFFF"],[1,0.5755116198004658,-134.1016627995932,0,"","",39,"Normal_Eye0000",36,0.5611519909321366,1.2636024235635333,0,null,"#FFFFFF"],[2,-15.60460377183313,55.96284374603815,0,".character#Character","leg_right_joint",40,35,34,0,false,false,1,10,true,0,-149,0,0,0,0],[0,-0.6013410814276934,3.800669590829147,0,".character#Character , .flesh","feet_right",41,"#999999","#000",0,false,true,[{"x":-0.3532003169100655,"y":-0.2334193398709985},{"x":0.3593429311171974,"y":0},{"x":0.3593429311171974,"y":0.12285228414263472},{"x":-0.3654855453243293,"y":0.11056705572837089}],1,7,null,"",1],[1,-17.51146898092036,112.60029105627989,0,"","",42,"Normal_Feet0000",41,1.515062169946712,1.2142877670861258,0,true,"#FFFFFF"],[2,-24.302431730465734,108.76090925482245,0,".character#Character","feet_right_joint",43,41,35,0,false,false,1,10,true,0,0,0,0,0,0],[0,-0.2913189083160428,-2.116475866987431,-0.5235987755982988,".character#Character , .flesh","shoulder_right",44,"#999999","#000",0,false,true,[{"x":-0.18491373990083915,"y":-0.8588215919838902},{"x":0.19313212834087423,"y":-0.8423848151038147},{"x":0.11094824394050207,"y":0.8506032035438524},{"x":-0.11916663238053715,"y":0.8506032035438524}],1,7,null,"",1],[0,0.7674060221504146,-1.3587035285866276,-1.4835298641951802,".character#Character , .flesh","arm_right",45,"#999999","#000",0,false,true,[{"x":-0.13560340926061798,"y":-0.6862354347431072},{"x":0.14382179770064596,"y":-0.7026722116231809},{"x":0.12738502082057224,"y":0.6944538231831459},{"x":-0.13560340926061798,"y":0.6944538231831459}],1,7,null,"",1],[0,0.698014487908662,-4.442322400630774,0,".character#Character","eye_right",46,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,7.534037070968986,"",1],[1,21.110118637454455,-133.80455415267332,0,"","",47,"Normal_Eye0000",46,0.5611519909321366,1.2636024235635333,0,null,"#FFFFFF"],[2,20.900219512693862,-132.8095744769817,0,".character#Character","eye_right_joint",48,46,28,0,false,false,1,10,true,0,0,0,0,0,0],[1,-8.20380484261639,-63.69775637628599,-0.5235987755982988,"","",49,"Normal_Shoulder0000",44,0.5731017503262358,-0.16063012257496162,0,true,"#FFFFFF"],[1,23.26951064902393,-40.92662781922026,-1.4835298641951802,"","",50,"Normal_Arm0000",45,0.29760652045521085,-0.8937510689744023,0,true,"#FFFFFF"],[2,4.452407532936377,-42.06868058388569,0,".character#Character","arm_right_joint",51,45,44,0,false,false,1,10,true,152,0,0,0,0,0],[0,1.6142293071474496,-1.2288497792194542,-1.7453292519943295,".character#Character , .flesh","hand_right",52,"#999999","#000",0,false,true,[{"x":0,"y":0},{"x":0,"y":0}],1,7,7.512582183874799,"",1],[1,48.3251025560185,-35.070858517476736,-1.7453292519943295,"","",53,"Normal_Hand0000",52,1.7975185021906417,2.9104087855451417,0,true,"#FFFFFF"],[2,41.047027389191896,-39.782258786761524,0,".character#Character","hand_right_joint",54,52,45,0,false,false,1,10,true,60,-60,0,0,0,0],[2,-18.426156553864757,-80.86404422851663,0,".character#Character","shoulder_right_joint",55,44,29,0,false,false,1,10,true,180,-19,0,0,0,0],[2,0.20593900816288624,-133.80202874938874,0,".character#Character","eye_left_joint",56,36,28,0,false,false,1,10,true,0,0,0,0,0,0],[2,-12.921286659664478,-85.47865823194277,0,".character#Character","shoulder_left_joint",57,2,29,0,false,false,1,10,true,180,-19,0,0,0,0],[2,-18.49355094501061,113.74126702226283,0,".character#Character","pedal_right_joint",58,41,3,0,false,false,1,10,false,0,0,0,0,0,0],[2,-0.8655909460089788,92.6312408506183,0,".character#Character","pedal_left_joint",59,16,3,0,false,false,1,10,false,0,0,0,0,0,0],[2,64.20863172995293,-40.41550229109624,0,".character#Character","grip_left_joint",60,4,10,0,false,false,1,10,false,0,0,0,0,0,0],[2,51.476059015688755,-34.80283447309619,0,".character#Character","grip_right_joint",61,4,52,0,false,false,1,10,false,0,0,0,0,0,0],[2,-40.15504316702884,-112.59470576523498,0,".character#Character","neck_joint",62,29,28,2,false,false,1,10,false,0,0,0.25,3,0,0],[2,-96.05584504862951,-149.53615887833575,0,".character#Character","back_joint",63,4,29,2,false,false,1,10,false,0,0,0.25,4,0,0],[2,-42.70650479921925,-11.93468248655901,0,".character#Character","belly_joint",64,29,0,0,false,false,1,10,true,10,-10,0,0,0,0],[2,-46.94748098294405,0.36414844624303555,0,".character#Character","sit_joint",65,4,0,2,false,false,1,10,false,0,0,0.5,10,0,0],[2,-41.43421194410137,0.3641484462430604,0,".character#Character","thigh_right_joint",66,34,0,0,false,false,1,10,true,142,-16,0,0,0,0],[2,-36.34504052363035,-3.8768277374817988,0,".character#Character","thigh_left_joint",67,13,0,0,false,false,1,10,true,142,-16,0,0,0,0]]}',
    class: Bike,
    library: PrefabManager.LIBRARY_ADMIN,
}
